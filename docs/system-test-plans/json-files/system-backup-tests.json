[
  {
    "test_plan_no": "STP-022-01",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.1: System Backup Management Page",
    "description": "Verify that the System Backup page loads correctly with proper authentication",
    "scenario": "Admin user navigates to the system backup management page to view backup options and status",
    "expected_results": "Display the system backup management page with header, statistics cards, backup actions, and backup list",
    "procedure": "1. Log in as admin user\n2. Navigate to /admin/system-backup\n3. Verify page loads completely\n4. Check header with 'System Backup & Restore' title\n5. Verify Schedule and Create Backup buttons are visible",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-02",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.2: Admin Authentication Check",
    "description": "Verify that non-admin users cannot access the system backup page",
    "scenario": "Regular user attempts to access the system backup management functionality",
    "expected_results": "Access should be denied and user redirected to appropriate error page",
    "procedure": "1. Log in as regular user (non-admin)\n2. Attempt to navigate to /admin/system-backup\n3. Verify access is denied\n4. Check redirect to login or unauthorized page\n5. Ensure no backup functionality is accessible",
    "test_status": "pending",
    "priority": "critical",
    "category": "security"
  },
  {
    "test_plan_no": "STP-022-03",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.3: Statistics Cards Display",
    "description": "Verify that backup statistics cards display accurate database counts and backup information",
    "scenario": "Admin views the statistics section to understand current system data and backup status",
    "expected_results": "Display four statistics cards showing Total Users, Total Records, Available Backups, and Last Backup with accurate counts",
    "procedure": "1. Navigate to system backup page as admin\n2. Verify 'Total Users' card shows correct user count\n3. Check 'Total Records' card displays sum of all database records\n4. Confirm 'Available Backups' shows correct backup file count\n5. Verify 'Last Backup' shows most recent backup date or 'Never'",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-04",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.4: Create Backup Form",
    "description": "Verify the create backup form displays properly with warning information",
    "scenario": "Admin reviews the create backup section before initiating a backup operation",
    "expected_results": "Display create backup form with description, warning notes about process time and security, and create button",
    "procedure": "1. Locate 'Create New Backup' section\n2. Verify descriptive text about backup contents\n3. Check yellow warning box with important notes\n4. Confirm warning mentions backup time, sensitive data, and storage security\n5. Verify 'Create Full Backup' button is visible and styled correctly",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-05",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.5: Create Backup Process",
    "description": "Verify that creating a new backup works correctly and generates proper backup file",
    "scenario": "Admin initiates a full system backup to preserve current database state",
    "expected_results": "Create backup file with timestamp, metadata, all database tables, and display success message with file size",
    "procedure": "1. Click 'Create Full Backup' button\n2. Wait for backup process to complete\n3. Verify success message appears with filename and size\n4. Check backup appears in backup list table\n5. Confirm backup file includes metadata and all required tables",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-06",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.6: Backup Creation Error Handling",
    "description": "Verify proper error handling when backup creation fails due to database or file system issues",
    "scenario": "Backup creation fails due to database connection error or insufficient disk space",
    "expected_results": "Display appropriate error message and log error details without exposing sensitive information",
    "procedure": "1. Simulate database connection failure during backup\n2. Attempt to create backup\n3. Verify error message appears\n4. Check error message doesn't expose sensitive database details\n5. Confirm error is logged for admin review",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-07",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.7: Restore Backup Form",
    "description": "Verify the restore backup form displays with file upload and restore type options",
    "scenario": "Admin prepares to restore system from a backup file with appropriate configuration options",
    "expected_results": "Display restore form with file upload field, restore type dropdown (merge/replace), descriptions, and warnings",
    "procedure": "1. Locate 'Restore from Backup' section\n2. Verify file input accepts .zip files only\n3. Check restore type dropdown has merge and replace options\n4. Confirm merge mode description (recommended, preserves data)\n5. Verify warning box explains restore process and data safety",
    "test_status": "pending",
    "priority": "high",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-08",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.8: Restore Type Selection",
    "description": "Verify that changing restore type updates warnings and button text appropriately",
    "scenario": "Admin selects different restore types to understand the implications of each option",
    "expected_results": "Dynamic warning updates when switching between merge and replace modes with appropriate danger styling",
    "procedure": "1. Select 'Merge with existing data' option\n2. Verify yellow warning box with merge-specific warnings\n3. Select 'Replace all data (DANGEROUS)' option\n4. Check warning box changes to red with destructive operation warnings\n5. Confirm button text updates to indicate danger level",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-09",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.9: Backup List Table",
    "description": "Verify the backup list table displays backup files with correct metadata and formatting",
    "scenario": "Admin reviews available backup files to select one for download or restore operations",
    "expected_results": "Display table with backup filename, creation date/time, file size, record counts, table counts, and action buttons",
    "procedure": "1. Locate 'Available Backups' table\n2. Verify table headers: Backup File, Created, Size & Records, Details, Actions\n3. Check each backup row shows filename with zip icon\n4. Confirm creation date and time are formatted correctly\n5. Verify file size in appropriate units (KB/MB/GB) and record counts",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-10",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.10: Empty Backup State",
    "description": "Verify the empty state display when no backup files are available",
    "scenario": "Admin views backup page when no backup files have been created yet",
    "expected_results": "Display empty state message with archive icon, descriptive text, and create backup button",
    "procedure": "1. Ensure no backup files exist in system\n2. Navigate to backup management page\n3. Verify empty state shows archive icon\n4. Check message 'No Backups Available'\n5. Confirm 'Create First Backup' button is present and functional",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-11",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.11: Download Backup Functionality",
    "description": "Verify that backup files can be downloaded successfully with proper security checks",
    "scenario": "Admin downloads a backup file for external storage or transfer to another system",
    "expected_results": "Download backup file with correct filename, file size, and content integrity",
    "procedure": "1. Click download button for a backup file\n2. Verify file download initiates\n3. Check downloaded file has correct filename\n4. Confirm file size matches displayed size\n5. Verify file can be opened as valid ZIP archive",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-12",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.12: Download Security Validation",
    "description": "Verify that download requests are properly validated to prevent unauthorized file access",
    "scenario": "Admin attempts to download backup with security validation checks",
    "expected_results": "Only allow download of valid backup files with proper authentication and path validation",
    "procedure": "1. Attempt to download non-existent backup file\n2. Verify error message for file not found\n3. Try downloading file with invalid extension\n4. Check path traversal protection\n5. Confirm admin authentication is required",
    "test_status": "pending",
    "priority": "critical",
    "category": "security"
  },
  {
    "test_plan_no": "STP-022-13",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.13: Delete Backup Functionality",
    "description": "Verify that backup files can be deleted with appropriate confirmation and logging",
    "scenario": "Admin removes old backup files to free up storage space",
    "expected_results": "Delete backup file with confirmation, success message, and audit logging",
    "procedure": "1. Click delete button for a backup file\n2. Confirm delete action (if confirmation dialog exists)\n3. Verify success message appears\n4. Check backup file is removed from list\n5. Confirm delete action is logged with admin username",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-14",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.14: Delete Security Validation",
    "description": "Verify that delete operations include proper security checks and error handling",
    "scenario": "Admin attempts to delete backup files with various security scenarios",
    "expected_results": "Proper validation of file existence, admin permissions, and path security",
    "procedure": "1. Attempt to delete non-existent backup file\n2. Verify error message for file not found\n3. Try deleting file with invalid extension\n4. Check path traversal protection\n5. Confirm operation requires admin authentication",
    "test_status": "pending",
    "priority": "critical",
    "category": "security"
  },
  {
    "test_plan_no": "STP-022-15",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.15: Upload Restore Process",
    "description": "Verify restore functionality works correctly when uploading a backup file in merge mode",
    "scenario": "Admin restores system from uploaded backup file using merge mode to preserve existing data",
    "expected_results": "Successfully restore data from backup file, merge with existing records, and display detailed success message",
    "procedure": "1. Select valid backup file for upload\n2. Choose 'Merge with existing data' option\n3. Click 'Restore from Backup' button\n4. Verify restore process completes successfully\n5. Check success message shows record count and backup date",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-16",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.16: Upload Restore Replace Mode",
    "description": "Verify restore functionality works correctly in replace mode with proper warnings",
    "scenario": "Admin performs complete database replacement from backup file understanding data loss implications",
    "expected_results": "Replace all existing data with backup data and display warning about permanent data loss",
    "procedure": "1. Select valid backup file for upload\n2. Choose 'Replace all data (DANGEROUS)' option\n3. Click restore button (should show danger styling)\n4. Verify all existing data is replaced\n5. Check success message warns about permanent data loss",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-17",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.17: Restore File Validation",
    "description": "Verify proper validation of uploaded backup files including format and content checks",
    "scenario": "Admin uploads various file types to test restore validation and error handling",
    "expected_results": "Accept only valid .zip backup files and reject invalid formats with appropriate error messages",
    "procedure": "1. Upload non-ZIP file (e.g., .txt, .pdf)\n2. Verify error message about invalid file format\n3. Upload empty ZIP file\n4. Check error for missing backup components\n5. Upload corrupted ZIP file and verify error handling",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-18",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.18: Server Restore Modal",
    "description": "Verify the server restore modal displays correctly with backup details and options",
    "scenario": "Admin clicks restore button for a server backup file to open restore configuration modal",
    "expected_results": "Display modal with backup file details, restore type options, warnings, and action buttons",
    "procedure": "1. Click 'Restore' button for a backup in the table\n2. Verify modal opens with backup filename\n3. Check modal shows backup creation date and record count\n4. Confirm restore type dropdown (merge/replace)\n5. Verify warning box and cancel/restore buttons",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-19",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.19: Server Restore Execution",
    "description": "Verify server restore functionality works correctly for backups already on the server",
    "scenario": "Admin restores database from a backup file stored on the server using the modal interface",
    "expected_results": "Successfully restore data from server backup file with proper success messaging and logging",
    "procedure": "1. Open restore modal for a server backup\n2. Select desired restore type (merge or replace)\n3. Click 'Restore Backup' button\n4. Verify restore process completes\n5. Check success message includes backup filename and creation date",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-20",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.20: Modal Warning Updates",
    "description": "Verify that modal warnings update dynamically when changing restore type in server restore",
    "scenario": "Admin changes restore type in server restore modal to see different warning levels",
    "expected_results": "Dynamic warning updates with appropriate color coding and messaging for merge vs replace modes",
    "procedure": "1. Open server restore modal\n2. Select 'Merge with existing data' option\n3. Verify yellow warning box with merge warnings\n4. Select 'Replace all data (DANGEROUS)' option\n5. Check warning changes to red with destructive operation warnings",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-21",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.21: Backup Schedule Page",
    "description": "Verify the backup schedule configuration page loads and displays current settings",
    "scenario": "Admin navigates to backup schedule page to configure automated backup settings",
    "expected_results": "Display schedule page with current configuration, next backup info, and back navigation button",
    "procedure": "1. Click 'Schedule' button from backup page\n2. Verify navigation to /admin/backup-schedule\n3. Check page header 'Backup Schedule Configuration'\n4. Confirm 'Back to Backup' button is present\n5. Verify schedule status and configuration sections display",
    "test_status": "pending",
    "priority": "medium",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-22",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.22: Schedule Status Display",
    "description": "Verify the schedule status section shows current configuration and next backup information",
    "scenario": "Admin reviews current backup schedule settings and timing information",
    "expected_results": "Display current schedule status (enabled/disabled), frequency, retention period, and next backup date",
    "procedure": "1. Navigate to backup schedule page\n2. Locate 'Schedule Status' section\n3. Verify current configuration shows status, frequency, retention\n4. Check 'Next Backup' section shows scheduled time or 'No automatic backup scheduled'\n5. Confirm status indicators use appropriate colors (green/red)",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-23",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.23: Backup Metadata Display",
    "description": "Verify backup metadata is correctly extracted and displayed for each backup file",
    "scenario": "Admin reviews backup file details including table counts, record counts, and backup version information",
    "expected_results": "Display backup metadata including tables backed up, total records, database type, and backup version",
    "procedure": "1. View backup list table with existing backups\n2. Check 'Details' column shows table count\n3. Verify database type (Supabase, Legacy, etc.)\n4. Confirm record counts are displayed correctly\n5. Check metadata shows 'Unknown' for legacy backups without metadata",
    "test_status": "pending",
    "priority": "medium",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-24",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.24: File Size Formatting",
    "description": "Verify file sizes are displayed in appropriate units (bytes, KB, MB, GB) based on size",
    "scenario": "Admin reviews backup file sizes displayed in human-readable format",
    "expected_results": "Display file sizes in appropriate units with proper decimal formatting",
    "procedure": "1. Create backups of different sizes\n2. Verify small files show in bytes or KB\n3. Check medium files display in MB\n4. Confirm large files show in GB when applicable\n5. Verify decimal formatting is consistent (e.g., 1.2 MB)",
    "test_status": "pending",
    "priority": "low",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-25",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.25: Responsive Design",
    "description": "Verify the backup page displays correctly on different screen sizes and devices",
    "scenario": "Admin accesses backup management from various devices to ensure responsive design functionality",
    "expected_results": "Responsive layout that adapts to mobile, tablet, and desktop screen sizes with proper element stacking",
    "procedure": "1. View backup page on desktop (1920x1080)\n2. Test on tablet view (768px width)\n3. Check mobile view (375px width)\n4. Verify tables scroll horizontally on small screens\n5. Confirm buttons and forms remain usable on all sizes",
    "test_status": "pending",
    "priority": "medium",
    "category": "ui"
  },
  {
    "test_plan_no": "STP-022-26",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.26: Database Connection Error",
    "description": "Verify proper error handling when database connections fail during backup operations",
    "scenario": "Backup operations are attempted when database is unavailable or connection is interrupted",
    "expected_results": "Display appropriate error messages and graceful degradation without system crashes",
    "procedure": "1. Simulate database connection failure\n2. Attempt to create backup\n3. Verify error message appears without technical details\n4. Try to load backup page with database offline\n5. Check error handling doesn't expose sensitive database information",
    "test_status": "pending",
    "priority": "high",
    "category": "functional"
  },
  {
    "test_plan_no": "STP-022-27",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.27: Backup Process Logging",
    "description": "Verify all backup operations are properly logged with admin user information and timestamps",
    "scenario": "Admin performs various backup operations which should be tracked for audit purposes",
    "expected_results": "Comprehensive logging of backup creation, downloads, deletions, and restore operations with user attribution",
    "procedure": "1. Create a backup and check logs for creation event\n2. Download a backup and verify download logging\n3. Delete a backup and confirm deletion logging\n4. Restore from backup and check restore logging\n5. Verify all logs include admin username and timestamps",
    "test_status": "pending",
    "priority": "high",
    "category": "security"
  },
  {
    "test_plan_no": "STP-022-28",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.28: Concurrent Access Handling",
    "description": "Verify system handles multiple admin users accessing backup functionality simultaneously",
    "scenario": "Multiple admin users perform backup operations at the same time to test concurrency handling",
    "expected_results": "Proper handling of concurrent backup operations without data corruption or system conflicts",
    "procedure": "1. Have two admin users create backups simultaneously\n2. One admin creates backup while another downloads\n3. Test concurrent restore operations\n4. Verify backup list updates correctly for all users\n5. Check no file conflicts or corruption occurs",
    "test_status": "pending",
    "priority": "medium",
    "category": "performance"
  },
  {
    "test_plan_no": "STP-022-29",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.29: Large Database Backup",
    "description": "Verify backup functionality works correctly with large datasets and extended processing times",
    "scenario": "Admin creates backup of system with large amount of data to test performance and timeout handling",
    "expected_results": "Successful backup creation for large datasets with appropriate progress indication and timeout handling",
    "procedure": "1. Create system with large dataset (1000+ records)\n2. Initiate backup creation\n3. Verify backup process doesn't timeout\n4. Check backup file size is appropriate\n5. Confirm backup integrity with large dataset",
    "test_status": "pending",
    "priority": "medium",
    "category": "performance"
  },
  {
    "test_plan_no": "STP-022-30",
    "module_name": "System-Backup",
    "screen_design_ref": "Figure 22.30: Data Integrity Validation",
    "description": "Verify backup and restore operations maintain complete data integrity across all database tables",
    "scenario": "Admin creates backup, modifies data, then restores to verify all data is preserved correctly",
    "expected_results": "Complete data integrity preservation with accurate restore of all records, relationships, and data types",
    "procedure": "1. Record current database state (user count, records, etc.)\n2. Create backup with known data state\n3. Modify database (add/edit/delete records)\n4. Restore from backup using merge mode\n5. Verify all original data is restored correctly",
    "test_status": "pending",
    "priority": "critical",
    "category": "functional"
  }
]